$(document).ready(function() {
    // Add event listener for submit button
    $("#submit").on("click", function(event) {
        // Prevent the page from refreshing
        event.preventDefault();
        getPrice();
    });
});

// gets data for the table
function getPrice() {
    var payload = {
        "origin": $('#sel_origin').val(),
        "dest": $('#sel_dest').val()
    };

    $.ajax({
        type: 'POST',
        url: "/getPrice/",
        contentType: 'application/json;charset=UTF-8',
        data: JSON.stringify({ "data": payload }),
        success: function(data) {
            $('#priceOutput').text(data[0])
            $('#bon_voyage').text("   ...enjoy your trip!")
        }
    });
}

var airports = [
    'ABE',
    'ABI',
    'ABQ',
    'ACT',
    'AEX',
    'AGS',
    'ALB',
    'ALO',
    'AMA',
    'ANC',
    'ASE',
    'ATL',
    'ATW',
    'AUS',
    'AVL',
    'AVP',
    'AZO',
    'BDL',
    'BFL',
    'BGM',
    'BGR',
    'BHM',
    'BIL',
    'BIS',
    'BJI',
    'BMI',
    'BNA',
    'BOI',
    'BOS',
    'BPT',
    'BRO',
    'BTR',
    'BTV',
    'BUF',
    'BUR',
    'BWI',
    'BZN',
    'CAE',
    'CAK',
    'CHA',
    'CHO',
    'CHS',
    'CID',
    'CLE',
    'CLL',
    'CLT',
    'CMH',
    'CMI',
    'COS',
    'COU',
    'CRP',
    'CRW',
    'CSG',
    'CVG',
    'CWA',
    'DAB',
    'DAL',
    'DAY',
    'DBQ',
    'DCA',
    'DEN',
    'DFW',
    'DHN',
    'DLH',
    'DRO',
    'DSM',
    'DTW',
    'ECP',
    'EGE',
    'ELM',
    'ELP',
    'ERI',
    'EUG',
    'EVV',
    'EWN',
    'EWR',
    'EYW',
    'FAI',
    'FAR',
    'FAT',
    'FAY',
    'FCA',
    'FLG',
    'FLL',
    'FNT',
    'FSD',
    'FSM',
    'FWA',
    'GCK',
    'GEG',
    'GFK',
    'GGG',
    'GJT',
    'GNV',
    'GPT',
    'GRB',
    'GRI',
    'GRK',
    'GRR',
    'GSO',
    'GSP',
    'GTF',
    'GUC',
    'HDN',
    'HNL',
    'HOU',
    'HPN',
    'HRL',
    'HSV',
    'IAD',
    'IAH',
    'ICT',
    'IDA',
    'ILM',
    'IND',
    'INL',
    'ISP',
    'ITH',
    'ITO',
    'JAC',
    'JAN',
    'JAX',
    'JFK',
    'JLN',
    'JNU',
    'KOA',
    'LAN',
    'LAS',
    'LAW',
    'LAX',
    'LBB',
    'LCH',
    'LEX',
    'LFT',
    'LGA',
    'LGB',
    'LIH',
    'LIT',
    'LNK',
    'LRD',
    'LSE',
    'MAF',
    'MBS',
    'MCI',
    'MCO',
    'MDT',
    'MDW',
    'MEI',
    'MEM',
    'MFE',
    'MFR',
    'MGM',
    'MHK',
    'MHT',
    'MIA',
    'MKE',
    'MLB',
    'MLI',
    'MLU',
    'MOB',
    'MOT',
    'MRY',
    'MSN',
    'MSO',
    'MSP',
    'MSY',
    'MTJ',
    'MYR',
    'OAJ',
    'OAK',
    'OGG',
    'OKC',
    'OMA',
    'ONT',
    'ORD',
    'ORF',
    'ORH',
    'PBI',
    'PDX',
    'PHF',
    'PHL',
    'PHX',
    'PIA',
    'PIB',
    'PIH',
    'PIT',
    'PNS',
    'PSC',
    'PSP',
    'PVD',
    'PWM',
    'RAP',
    'RDM',
    'RDU',
    'RIC',
    'RNO',
    'ROA',
    'ROC',
    'ROW',
    'RST',
    'RSW',
    'SAF',
    'SAN',
    'SAT',
    'SAV',
    'SBA',
    'SBN',
    'SBP',
    'SCE',
    'SDF',
    'SEA',
    'SFO',
    'SGF',
    'SGU',
    'SHV',
    'SJC',
    'SJT',
    'SJU',
    'SLC',
    'SMF',
    'SNA',
    'SPI',
    'SPS',
    'SRQ',
    'STL',
    'STT',
    'STX',
    'SUX',
    'SWF',
    'SYR',
    'TLH',
    'TOL',
    'TPA',
    'TRI',
    'TUL',
    'TUS',
    'TVC',
    'TXK',
    'TYR',
    'TYS',
    'VLD',
    'VPS',
    'XNA',
    'YUM'
]

function originDropDown() {
    console.log(airports)
    var selector = d3.select('#sel_origin')
    airports.forEach((port) => {
        selector.append('option')
            .text(port)
            .property("value", port)
    })
};

function destDropDown() {
    console.log(airports)
    var selector = d3.select('#sel_dest')
    airports.forEach((port) => {
        selector.append('option')
            .text(port)
            .property("value", port)
    })
};

originDropDown();
destDropDown();